@if (!isSentLink) {
  <section class="custom-container">
    <div class="px-8 py-6 sm:px-28 sm:py-20 max-w-[722px] rounded-xl bg-white">
      <h1
        class="text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-bold text-[#161616] mb-[32px] sm:mb-[48px]"
      >
        {{ 'RESET_PASSWORD.FORGOT_PASSWORD' | translate }}
      </h1>

      <form [formGroup]="forgetPasswordForm" (ngSubmit)="onSubmit()">
        <div class="mb-5">
          <div class="relative w-full">
            <label class="text-sm font-normal text-[#161616] block mb-2">
              {{ 'RESET_PASSWORD.NATIONAL_ID_LABEL' | translate }}
            </label>
            <input
              class="peer"
              type="text"
              pInputText
              [placeholder]="'RESET_PASSWORD.NATIONAL_ID_LABEL' | translate"
              fluid="true"
              formControlName="nationalId"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus:left-0 peer-focus:w-full"
            ></span>

            <!-- Validation Messages for National ID -->
          </div>
          <app-validation-messages [control]="forgetPasswordForm.get('nationalId')!">
          </app-validation-messages>
        </div>
        <!-- National ID Field -->

        <!-- Email Field -->
        <div class="mb-5">
          <div class="relative w-full">
            <label class="text-sm font-normal text-[#161616] block mb-2">
              {{ 'RESET_PASSWORD.EMAIL_LABEL' | translate }}
            </label>
            <input
              class="peer"
              type="email"
              pInputText
              [placeholder]="'RESET_PASSWORD.EMAIL_LABEL' | translate"
              fluid="true"
              formControlName="email"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus:left-0 peer-focus:w-full"
            ></span>

            <!-- Validation Messages for Email -->
          </div>
          <app-validation-messages [control]="forgetPasswordForm.get('email')!">
          </app-validation-messages>
        </div>

        <!-- Form Actions -->
        <div class="mt-10 flex items-center justify-between flex-wrap gap-4">
          <button type="submit" class="btn green-btn w-full">
            {{ 'RESET_PASSWORD.SEND_RESET_LINK' | translate }}
          </button>

          <button
            type="button"
            class="btn w-full border border-[#d2d6db] !text-[#000] hover:!bg-[#f3f4f6]"
            (click)="onCancel()"
          >
            {{ 'COMMON.CANCEL' | translate }}
          </button>
        </div>
      </form>
    </div>
  </section>
} @else {
  <section class="custom-container">
    <div class="px-8 py-6 sm:px-28 sm:py-20 max-w-[722px] rounded-xl bg-white">
      <h1
        class="text-[24px] sm:text-[30px] md:text-[36px] lg:text-[42px] font-bold text-[#161616] mb-[24px] sm:mb-[32px]"
      >
        @if (isResentLink) {
          {{ 'RESET_PASSWORD.RESEND_LINK_SENT' | translate }}
        } @else {
          {{ 'RESET_PASSWORD.LINK_SENT' | translate }}
        }
      </h1>

      <article>
        <div class="mb-5">
          <p class="text-[16px] md:text-[18px] font-medium text-[#384250]">
            @if (isResentLink) {
              {{ 'RESET_PASSWORD.RESENT_LINK_DONE' | translate }}
            } @else {
              {{ 'RESET_PASSWORD.SENT_LINK_DONE' | translate }}
            }
          </p>

          <!-- Show the email address that was used -->
          <!-- @if (lastSubmittedData?.email) {
            <p class="text-[14px] text-[#6b7280] mt-2">
              {{ 'RESET_PASSWORD.EMAIL_SENT_TO' | translate }}:
              <strong>{{ lastSubmittedData?.email }}</strong>
            </p>
          } -->
        </div>
        @if (remainingSeconds > 0) {
          <div class="flex items-center justify-center my-6">
            <div class="countdown relative inline-flex items-center justify-center w-20 h-20">
              <svg
                [attr.width]="(countdownRadius + countdownStrokeWidth) * 2"
                [attr.height]="(countdownRadius + countdownStrokeWidth) * 2"
                [attr.viewBox]="
                  '0 0 ' +
                  (countdownRadius + countdownStrokeWidth) * 2 +
                  ' ' +
                  (countdownRadius + countdownStrokeWidth) * 2
                "
                class="-rotate-90"
              >
                <!-- Track -->
                <circle
                  [attr.cx]="countdownRadius + countdownStrokeWidth"
                  [attr.cy]="countdownRadius + countdownStrokeWidth"
                  [attr.r]="countdownRadius"
                  [attr.stroke-width]="countdownStrokeWidth"
                  class="text-[#e5e7eb]"
                  stroke="currentColor"
                  fill="transparent"
                ></circle>
                <!-- Progress -->
                <circle
                  [attr.cx]="countdownRadius + countdownStrokeWidth"
                  [attr.cy]="countdownRadius + countdownStrokeWidth"
                  [attr.r]="countdownRadius"
                  [attr.stroke-width]="countdownStrokeWidth"
                  class="text-[#1b8354]"
                  stroke="currentColor"
                  fill="transparent"
                  [attr.stroke-dasharray]="circumference"
                  [attr.stroke-dashoffset]="dashOffset"
                  stroke-linecap="round"
                ></circle>
              </svg>
              <div
                class="timer-text text-[#384250] font-bold text-sm flex items-center justify-center absolute inset-0"
              >
                {{ formattedTime }}
              </div>
            </div>
          </div>
        }
        <div class="mt-10 flex items-center justify-between flex-wrap gap-4">
          <button
            type="button"
            class="btn green-btn w-full disabled:!bg-[#e5e7eb] disabled:!text-[#9da4ae] disabled:cursor-not-allowed"
            [disabled]="remainingSeconds > 0"
            [attr.aria-disabled]="remainingSeconds > 0"
            (click)="onResendLink()"
          >
            {{ 'RESET_PASSWORD.RESEND_LINK' | translate }}
          </button>

          <div class="flex gap-4 w-full">
            <!-- <button
              type="button"
              class="btn gray-btn inline-flex items-center justify-center min-h-[40px] px-3 rounded text-[14px] font-medium hover:bg-[#f1f1f1] transition flex-1 border border-[#d2d6db]"
              (click)="onBackToForm()"
            >
              {{ 'RESET_PASSWORD.BACK_TO_FORM' | translate }}
            </button> -->

            <button
              type="button"
              class="btn w-full border border-[#d2d6db] !text-[#000] hover:!bg-[#f3f4f6]"
              (click)="onBackToLogin()"
            >
              {{ 'RESET_PASSWORD.BACK_TO_LOGIN' | translate }}
            </button>
          </div>
        </div>
      </article>
    </div>
  </section>
}
