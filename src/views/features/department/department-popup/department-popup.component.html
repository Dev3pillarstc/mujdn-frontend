<div dir="rtl">
  <div class="p-6">
    <button class="block ms-auto" (click)="close()">
      <i class="pi pi-times"></i>
    </button>
    <h3 class="text-[#1f2a37 font-[600] mb-4 text-lg sm:text-xl">إدارة جديدة</h3>

    <form [formGroup]="form" class="">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div>
          <label for="departmentName" class="label"> اسم الإدارة عربي</label>
          <div class="relative">
            <input
              id="departmentName"
              placeholder=" اسم الإدارة"
              type="text"
              pInputText
              class="peer"
              fluid="true"
              formControlName="nameAr"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('nameAr')?.invalid && form.get('nameAr')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="departmentNameEn" class="label">اسم الإدارة إنجليزي</label>
          <div class="relative">
            <input
              id="departmentNameEn"
              placeholder="اسم الإدارة إنجليزي"
              type="text"
              pInputText
              class="peer"
              fluid="true"
              formControlName="nameEn"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('nameEn')?.invalid && form.get('nameEn')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="regionSelect" class="label">المنطقة</label>
          <div class="relative">
            <p-select
              name="regionSelect"
              [options]="regions"
              optionValue="id"
              [optionLabel]="langOptionLabel"
              placeholder="اختر المنطقة"
              class="w-full peer"
              id="regionSelect"
              formControlName="fkRegionId"
              (onChange)="onRegionChange($event)"
            >
            </p-select>

            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('fkRegionId')?.invalid && form.get('fkRegionId')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="citySelect" class="label">المدينة</label>
          <div class="relative">
            <p-select
              name="citySelect"
              [options]="filteredCities"
              optionValue="id"
              [optionLabel]="langOptionLabel"
              placeholder="اختر المدينة"
              class="w-full peer"
              id="citySelect"
              formControlName="fkCityId"
              [disabled]="filteredCities.length === 0"
            >
            </p-select>
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('fkCityId')?.invalid && form.get('fkCityId')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="addressInput" class="label"> العنوان</label>
          <div class="relative">
            <input
              id="addressInput"
              placeholder=" العنوان"
              type="text"
              pInputText
              class="peer"
              fluid="true"
              formControlName="address"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('address')?.invalid && form.get('address')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="phoneInput" class="label"> الهاتف</label>
          <div class="relative">
            <input
              id="phoneInput"
              placeholder=" الهاتف"
              type="text"
              pInputText
              class="peer"
              fluid="true"
              formControlName="phoneNumber"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="faxInput" class="label"> الفاكس</label>
          <div class="relative">
            <input
              id="faxInput"
              placeholder=" الفاكس"
              type="text"
              pInputText
              class="peer"
              fluid="true"
              formControlName="fax"
            />
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('fax')?.invalid && form.get('fax')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
        <div>
          <label for="managerSelect" class="label">اسم المدير</label>
          <div class="relative">
            <p-select
              name="managerSelect"
              [options]="usersProfiles"
              [optionLabel]="langOptionLabel"
              optionValue="id"
              placeholder="اختر المدير"
              class="w-full peer"
              id="managerSelect"
              formControlName="fkManagerId"
            >
            </p-select>
            <span
              class="absolute bottom-0 left-1/2 w-0 h-0.5 bg-black transition-all duration-500 peer-focus-within:left-0 peer-focus-within:w-full"
            ></span>
          </div>
          <span
            class="validation-message"
            *ngIf="form.get('fkManagerId')?.invalid && form.get('fkManagerId')?.touched"
            >هذا الحقل مطلوب</span
          >
        </div>
      </div>
      <div class="mt-6 pt-6 border-t border-[#d2d6db]">
        <h3 class="text-[#1f2a37 font-[600] mb-4 text-lg sm:text-xl">مستوى الموافقة</h3>
        <div class="flex flex-wrap gap-8 items-center">
          <label class="flex items-center cursor-pointer gap-2">
            <input
              type="radio"
              class="hidden peer"
              name="isOneLevelApproval"
              [value]="false"
              id="two-levels-radio"
              formControlName="isOneLevelApproval"
            />
            <span
              class="w-6 h-6 rounded-full border-2 border-[#64748b] flex items-center justify-center peer-checked:border-[#22a06b]"
            >
              <span
                class="w-4 h-4 rounded-full bg-[#22a06b] block peer-checked:block"
                *ngIf="form.get('isOneLevelApproval')?.value === false"
              ></span>
            </span>
            <span>على مستويين</span>
          </label>
          <label class="flex items-center cursor-pointer gap-2">
            <input
              type="radio"
              class="hidden peer"
              name="isOneLevelApproval"
              [value]="true"
              id="one-level-radio"
              formControlName="isOneLevelApproval"
            />
            <span
              class="w-6 h-6 rounded-full border-2 border-[#64748b] flex items-center justify-center peer-checked:border-[#22a06b]"
            >
              <span
                class="w-4 h-4 rounded-full bg-[#22a06b] block peer-checked:block"
                *ngIf="form.get('isOneLevelApproval')?.value === true"
              ></span>
            </span>
            <span>على مستوى واحد</span>
          </label>
        </div>
      </div>
      <div class="actions mt-6 flex items-center justify-end gap-4">
        <button type="button" class="btn gray-btn" (click)="close()">إلغاء</button>
        <button type="button" class="btn green-btn" (click)="save$.next()">
          {{ isCreateMode ? 'حفظ' : 'تعديل' }}
        </button>
      </div>
    </form>
  </div>
</div>
